<!DOCTYPE html>

<html lang="cs">
<head>
  <title>Účinkující</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <link rel="shortcut icon" href="favicon.ico" />
  <!-- iPhone & Android 2.2+ -->
  <link rel="apple-touch-icon" href="icons/dokoranIcon57x57.png" />
  <!-- iPhone 4 retina display -->
  <link rel="apple-touch-icon" sizes="114x114" href="icons/dokoranIcon114x114.png" />
  <!-- iPad & iPad 2 -->
  <link rel="apple-touch-icon" sizes="72x72" href="icons/dokoranIcon72x72.png" />
  <!-- iPad retina display -->
  <link rel="apple-touch-icon" sizes="144x144" href="icons/dokoranIcon144x144.png" />
  <!-- iPhone -->
  <link rel="apple-touch-startup-image" media="(device-width: 320px)" href="icons/dokoranSplash320x460.png" />
  <!-- iPhone (Retina) -->
  <link rel="apple-touch-startup-image"
        media="(device-width: 320px) and (-webkit-device-pixel-ratio: 2)"
        href="icons/dokoranSplash640x920.png" />
	<link href="content/dokoran.min.css" rel="stylesheet" type="text/css" />	  
	<link href="content/dokoran.css" rel="stylesheet" type="text/css" />
	<link href="content/jquery.mobile.structure-1.3.2.min.css" rel="stylesheet" type="text/css" />
	<script src="libs/cordova.js" type="text/javascript"></script>
	<script src="libs/jquery-1.10.2.min.js" type="text/javascript"></script>
	<script src="libs/jquery.mobile-1.3.2.min.js" type="text/javascript"></script>
</head>
<body>
	<div id="artists" data-role="page" data-rnc-jspage="artists" data-theme="a">
		<div data-role="header">
		<h1>Účinkující</h1>
		</div><!-- /header -->
		<section data-role="content">
			<ul id="artistslist" data-role="listview" data-autodividers="true" data-filter="true" data-alphabet="true"></ul>
		</section>

		<footer data-role="footer" data-id="footer" data-position="fixed">
			<div data-role="navbar" class="nav-glyphish-example" data-grid="d">
			<ul>
			<li><a href="index.html" id="uvod" data-icon="home" data-ajax="false">úvod</a></li>
			<li><a href="program.html" data-icon="bars" data-ajax="false">program</a></li>
			<li><a href="artists.html" id="artists" data-icon="star" data-ajax="false" class="ui-btn-active ui-state-persist" data-prefetch>účinkující</a></li>
			<li><a href="map.html" id="map" data-icon="grid" data-prefetch>mapka</a></li>
			<li><a href="info.html" id="info" data-icon="info" data-prefetch>info</a></li>
			</ul>
			</div>
		</footer>
	</div>
  <script src="scripts/app.js" type="text/javascript"></script>
      <script type="text/javascript">
	$(document).on('pagebeforeshow', '#artists', function(){
		if ($("#artistslist")[0].childElementCount==0){
			$.getJSON('content/data/program.json', function(data) {
			  var items = [];
			  var itemslist = [];
			  $.each(data.days, function(key, val) {
				$.each(val.stages, function(key1, val1) {
					$.each(val1.artists, function(key2, val2) {
						items.push(val2);
					});
				});
			  });
				items.sort( function(a,b) { return a.name.localeCompare( b.name ) });
				$.each(items, function(key, val) {
					itemslist.push('<li><a href="artistdetail.html?id=' + val.id + '" data-ajax="false"><img src="'+ val.icoimage +'" width="80" /><h3>'+ val.name +'</h3><p>'+ val.shortdesc +'</p></a></ul>');
				});
				$("#artistslist").append(itemslist.join(''));
				$('#artistslist').listview('refresh');
			});
		}
	});
    </script>
</body>
</html>
