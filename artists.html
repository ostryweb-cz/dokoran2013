<!DOCTYPE html>

<html lang="cs">
<head>
  <title>Artists</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <link rel="shortcut icon" href="favicon.ico" />
  <link rel="apple-touch-icon" href="icons/57.jpg" />
  <link rel="apple-touch-icon" sizes="114x114" href="icons/114.jpg" />
  <link rel="apple-touch-icon" sizes="72x72" href="icons/72.jpg" />
  <link rel="apple-touch-icon" sizes="144x144" href="icons/144.jpg" />
	<link href="content/dokoran.min.css" rel="stylesheet" type="text/css" />	  
	<link href="content/dokoran.css" rel="stylesheet" type="text/css" />
	<link href="content/jquery.mobile.structure-1.3.2.min.css" rel="stylesheet" type="text/css" />
	<script src="libs/cordova.js" type="text/javascript"></script>
	<script src="libs/jquery-1.10.2.min.js" type="text/javascript"></script>
	<script src="libs/jquery.mobile-1.3.2.min.js" type="text/javascript"></script>
</head>
<body>
	<div id="artists" data-role="page" data-rnc-jspage="artists" data-theme="a">
		<div data-role="header">
		<a href="index.html" data-icon="back" data-ajax="false">zpět</a>
		<h1>ARTISTS</h1>
		</div><!-- /header -->
		<section data-role="content">
			<ul id="artistslist" data-role="listview" data-autodividers="true" data-filter="true" data-alphabet="true"></ul>
		</section>

		<footer data-role="footer" data-id="footer" data-position="fixed">
			<div data-role="navbar" class="nav-glyphish-example" data-grid="d">
			<ul>
			<li><a href="index.html" id="uvod" data-icon="home" data-ajax="false">ÚVOD</a></li>
			<li><a href="program.html" data-icon="bars" data-ajax="false">PROGRAM</a></li>
			<li><a href="artists.html" id="artists" data-icon="star" data-ajax="false" class="ui-btn-active ui-state-persist" data-prefetch>ARTISTS</a></li>
			<li><a href="map.html" id="map" data-icon="grid" data-ajax="false">MAPA</a></li>
			<li><a href="info.html" id="info" data-icon="info" data-prefetch>INFO</a></li>
			</ul>
			</div>
		</footer>
	</div>
  <script src="scripts/app.js" type="text/javascript"></script>
      <script type="text/javascript">
	$(document).on('pagebeforeshow', '#artists', function(){
		if ($("#artistslist")[0].childElementCount==0){
			$.getJSON('content/data/program.json', function(data) {
			  var items = [];
			  var itemslist = [];
			  $.each(data.days, function(key, val) {
				$.each(val.stages, function(key1, val1) {
					$.each(val1.artists, function(key2, val2) {
						items.push(val2);
					});
				});
			  });
				items.sort( function(a,b) { return a.name.localeCompare( b.name ) });
				$.each(items, function(key, val) {
					var iconhtml='';
					if (val.icoimage!=''){
						iconhtml='<img src="'+ val.icoimage +'" width="73" />';
					}
					itemslist.push('<li><a href="artistdetail.html?id=' + val.id + '" data-ajax="false">'+iconhtml+'<h3>'+ val.name +'</h3><p>'+ val.shortdesc +'</p></a></ul>');
				});
				$("#artistslist").append(itemslist.join(''));
				$('#artistslist').listview('refresh');
			});
		}
	});
    </script>
</body>
</html>
